import subprocess

# Read list of hosts from a file
with open('hosts.txt') as f:
    hosts = f.read().splitlines()

# Open output file for writing
with open('live_hosts.txt', 'w') as f:
    # Ping each host and write live hosts to output file
    for host in hosts:
        ping = subprocess.run(['ping', '-c', '1', host], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        if ping.returncode == 0:
            f.write(host + '\n')
