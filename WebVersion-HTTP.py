import nmap

# Read in a list of IP addresses from a file
with open('iplist.txt', 'r') as f:
    iplist = f.read().splitlines()

# Create an instance of the nmap.PortScanner class
scanner = nmap.PortScanner()

# Loop through each IP address and scan port 80 for web server versions
for ip in iplist:
    result = scanner.scan(ip, '80', arguments='--script=http-server-header')

    # Save the scan output to a text file
    with open('output.txt', 'a') as f:
        f.write(f"Results for {ip}:\n{result}\n")
